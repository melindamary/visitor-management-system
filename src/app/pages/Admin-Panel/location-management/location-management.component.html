<p-toast/>
<p-toolbar styleClass="mb-4 gap-2">
  <ng-template pTemplate="left">
      <p-button 
          pRipple 
          label="New" 
          icon="pi pi-plus" 
          class="mr-2" 
          (click)="openNewLocationDialog()" />
  </ng-template>
</p-toolbar>

<app-table [dataSource]="locationDataSource" [columnsToDisplay]="locationColumns" [rows]="5" [totalItems]="totalItems"
           [actionsTemplate]="actionsTemplate" [summaryTemplate]="summaryTemplate">
  <ng-template #actionsTemplate let-rowData>
    <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" (click)="editLocation(rowData)"></p-button>
  </ng-template>
  <ng-template #summaryTemplate>
    <div class="flex align-items-center justify-content-between">
      In total there are {{ totalItems }} locations.
    </div>
  </ng-template>
</app-table>

<p-dialog header="Location Details" [(visible)]="locationDialog" [modal]="true" [style]="{ width: '50rem' }" styleClass="p-fluid">
  <ng-template pTemplate="header">
    <div class="inline-flex align-items-center justify-content-center gap-2 bg-violet">
      <span class="font-bold white-space-nowrap">Enter Location Details</span>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="field">
      <label for="name">Name</label>
      <input 
          type="text" 
          pInputText 
          id="name" 
          [(ngModel)]="selectedLocation.name" 
          required 
          autofocus />
      <small class="p-error" *ngIf="submitted && !selectedLocation.name">
          Name is required.
      </small>
  </div>
  <div class="field">
    <label for="address">Address</label>
    <textarea 
        id="address" 
        pInputTextarea 
        [(ngModel)]="selectedLocation.address" 
        required 
        rows="3" 
        cols="20">
    </textarea>
    <small class="p-error" *ngIf="submitted && !selectedLocation.address">
      Address is required.
  </small>
  </div>
  <div class="field">
    <label for="phone">Phone</label>
    <input 
        type="text" 
        pInputText 
        id="phone" 
        [(ngModel)]="selectedLocation.phone" 
        required 
        autofocus />
    <small class="p-error" *ngIf="submitted && !selectedLocation.phone">
        Phone is required.
    </small>
</div>
  </ng-template>
  <!-- <div class="flex align-items-center gap-3 mb-2">
    <label class="font-semibold w-6rem">Location Name</label>
    <input pInputText [(ngModel)]="selectedVisitor.name" id="visitorName" class="flex-auto"  />
  </div>
  <div class="flex align-items-center gap-3 mb-4">
    <label for="cardNumber" class="font-semibold w-6rem">Visitor Pass Code</label>
    <input pInputText [(ngModel)]="cardNumber" id="cardNumber" class="flex-auto" autocomplete="off" />
  </div> -->
  <ng-template pTemplate="footer">
    <p-button label="Cancel" styleClass="custom-reject-button" (click)="hideDialog()"></p-button>
    <p-button label="Save"  (click)="saveLocation()" ></p-button>
  </ng-template>  
</p-dialog>